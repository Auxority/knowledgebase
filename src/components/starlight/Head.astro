---
import type { Props } from '@astrojs/starlight/props';
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import VtbotStarlight from 'astro-vtbot/components/starlight/Base.astro';

import { pwaInfo } from "virtual:pwa-info";
---

<!-- https://events-3bg.pages.dev/jotter/starlight/guide/ -->
<VtbotStarlight {...Astro.props} transition:animate="fade">
	<StarlightHead {...Astro.props}><slot /></StarlightHead>
</VtbotStarlight>

<!-- https://astro-pwa-recipe.vercel.app/recipe/generate-sw -->
{pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}
<script>
	import { registerSW } from 'virtual:pwa-register';

	registerSW({
		immediate: true,
		onRegisteredSW(swScriptUrl) {
			console.log('SW registered: ', swScriptUrl);
		},
		onOfflineReady() {
			console.log('PWA application ready to work offline');
		},
	});
</script>
